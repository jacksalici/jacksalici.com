---
import Base from "../../layouts/Base.astro";
import PostCard from "../../components/PostCard.astro";

import { getCollection } from 'astro:content';

const products = (await getCollection('market')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
).filter(item => item.data.draft !== true && item.data.hidden !== true).sort(
  (a, b) => a.data.status !== "sold" ? -1 : 1
);

---

<Base>
  <main>
    <h1 class="mb-4 text-4xl">Garage Sales</h1>
    <p class="mb-3">ğŸ‡®ğŸ‡¹ Di tanto in tanto cerco nuovi possessori per qualche oggetto hardware che ho usato e amato. Se sei interessatÉ™, <a href="/contacts" class="underline">contattami</a>.</p>    
    <p class="mb-6">ğŸ‡ºğŸ‡¸ From time to time I look for new owners for some hardware I have used and loved. If you are interested, <a href="/contacts" class="underline">contact me</a>.</p>    

  

    <div class="space-y-6">
        {products.map((item) => (
            
          <PostCard
            title={item.data.title}
            description={item.data.description}
            summary={item.data.status === "sold" ? "[SOLD]" : ""}
            pubDate={item.data.pubDate}
            slug={"/market/" + item.slug}
            unavailable={item.data.status === "sold"}
          />
            
        ))} 
        
    </div>
    
  </main>
</Base>
